define("local_quiz_uploader/upload",["jquery","core/ajax","core/notification"],(function($,Ajax,Notification){function setupCourseSectionSync(courseSelector,sectionSelector){var courseSelect=$(courseSelector),sectionSelect=$(sectionSelector);courseSelect.length&&sectionSelect.length&&(courseSelect.on("change",(function(){var courseid=$(this).val();courseid?(sectionSelect.html('<option value="">Loading sections...</option>'),sectionSelect.prop("disabled",!0),$.ajax({url:M.cfg.wwwroot+"/local/quiz_uploader/ajax_get_sections.php",method:"GET",data:{courseid:courseid,sesskey:M.cfg.sesskey},dataType:"json",success:function(data){var options='<option value="">-- Select a section --</option>';data.forEach((function(section){options+='<option value="'+section.id+'">'+section.name+"</option>"})),sectionSelect.html(options),sectionSelect.prop("disabled",!1);var urlParams=new URLSearchParams(window.location.search),paramName="#id_targetsection"===sectionSelector?"targetsection":"section",savedVal=urlParams.get(paramName);savedVal&&sectionSelect.find('option[value="'+savedVal+'"]').length>0&&sectionSelect.val(savedVal)},error:function(xhr,status,error){console.error("Failed to load sections:",error),Notification.addNotification({message:"Failed to load sections. Please try again.",type:"error"}),sectionSelect.html('<option value="">Error loading sections</option>'),sectionSelect.prop("disabled",!1)}})):sectionSelect.html('<option value="">Please select a course first...</option>')})),courseSelect.val()&&courseSelect.trigger("change"))}return{init:function(){setupCourseSectionSync("#id_course","#id_section"),setupCourseSectionSync("#id_targetcourse","#id_targetsection");var savedTimelimit=localStorage.getItem("quiz_uploader_timelimit"),savedAttempts=localStorage.getItem("quiz_uploader_completionminattempts");savedTimelimit&&$("#id_timelimit_number").val(savedTimelimit),savedAttempts&&$("#id_completionminattempts").val(savedAttempts),$("form").on("submit",(function(){var timelimit=$("#id_timelimit_number").val(),attempts=$("#id_completionminattempts").val();timelimit&&localStorage.setItem("quiz_uploader_timelimit",timelimit),attempts&&localStorage.setItem("quiz_uploader_completionminattempts",attempts)}))}}}));

//# sourceMappingURL=upload.min.js.map